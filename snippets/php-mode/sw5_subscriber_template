# -*- mode: snippet -*-
# name: shopware5 template subscriber
# key: sw5_subscriber_template
# group: shopware5
# contributor: Daniel Richtmann <daniel.richtmann@gmail.com>
# --
<?php

namespace ${1:`(projectile-project-name)`}\Subscriber\Resources;

use Enlight\Event\SubscriberInterface;

final class TemplateSubscriber implements SubscriberInterface
{
    /**
     * @var string
     */
    private $viewDir;

    /**
     * @param string $viewDir
     */
    public function __construct($viewDir)
    {
        $this->viewDir = $viewDir;
    }

    public static function getSubscribedEvents()
    {
        return [
            'Theme_Inheritance_Template_Directories_Collected' => 'onCollectTemplateDirectories',
        ];
    }

    /**
     * @param \Enlight_Event_EventArgs $args
     */
    public function onCollectTemplateDirectories(\Enlight_Event_EventArgs $args)
    {
        $dirs = $args->getReturn();

        $dirs[] = $this->viewDir;

        $args->setReturn($dirs);
    }
}
